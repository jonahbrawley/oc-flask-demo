<!DOCTYPE html>
<html>
	<head><link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/app.css') }}"/></head>
	<body>
		<div class="wrapper"><p>Welcome to my awesome app!</p>
			<form id="myForm" onsubmit="return false;" method="post">
			<label for="name">Name: </label>
			<input type="text" id="textfield" name="name" placeholder="Hank">
			<input type="submit" value="Submit" onclick="submitName()">
			</form>
		</div>
		<script async>
			function submitName() {
				// Get the entered name
				var name = document.getElementById("textfield").value;

				// Construct the URL with the query string
				var url = "http://go-svc-flask-demo.apps-crc.testing/set?name=" + encodeURIComponent(name);
				console.log("Sending name " + url);

				// Send the request to the locally hosted IP
				fetch(url)
					.then(
						response => response.text()
					).then(
						text => window.alert("response: " + text)
					);
				window.alert("Name " + name + " sent");
			};
		</script>
	</body>
</html>
